app = "autoshift-mongodb"
primary_region = "ams"

[build]
image = "mongo:7.0"

[[mounts]]
source = "mongodb_data"
destination = "/data/db"

[processes]
app = "mongod --bind_ip_all --ipv6 --auth"

[env]
MONGO_INITDB_DATABASE = "cars"
MONGO_INITDB_ROOT_USERNAME = "admin"
MONGO_INITDB_ROOT_PASSWORD = "yourStrongPassword"

[[services]]
processes = ["app"]
internal_port = 27017
protocol = "tcp"

[[services.ports]]
port = 27017
handlers = []  # internal only, no public access

[experimental]
memory = "2GB"

[[vm]]
private_network = "440"  # Explicitly use the 440 subnet
